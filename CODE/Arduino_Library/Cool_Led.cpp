/*	LACOOL_CO's GENERAL LIBRARY
	TYPE : ACTUATOR	-	MODEL : Petit Cool Led System
	ROLE : 	Le Petit Cool Led Management
	@author Maximilien Daman	15/11/2015
	Mail : max@lacool.co	Web : www.lacool.co
 */

//Inclusion des librairies
	#include "Arduino.h"
	#include "PetitCool.h"

///////////////////////////////////////////////////////////////////////////////
///////////////////////////////CONSTRUCTEURS///////////////////////////////////
///////////////////////////////////////////////////////////////////////////////	
Cool_Led::Cool_Led()
{}

void Cool_Led::begin(uint8_t ConnectPin)
{
	LedPin = ConnectPin;
	pinMode(ConnectPin, OUTPUT);
	setError(0);
	Mode = 1;
	TimerPhase = false;
}
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//////////////////////////////////ERRORLEVEL///////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
uint8_t Cool_Led::errorlevel()
{	//EN COURS//
/* //Initialisation:
	pinMode(LedPin, INPUT);
//Test de fonctionnement:
	int Test = 1;
	if(analogRead(LedPin) == 0 ) Test = 0;
	else Test = 1;
	pinMode(LedPin, OUTPUT);
//Niveau d erreur:
	if((ErrorLevel == 0)||(ErrorLevel == 1)) ErrorLevel = (Test == 0)?1:0;
	else
	{
		if(Test == 0) ErrorLevel = 1;
		else return;
	} */
	ErrorLevel = 0;
	return ErrorLevel;
}
///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

void Cool_Led::setVal(uint8_t Pow)
{
	if(ErrorLevel == 0)
	{
		Power = Pow;
		analogWrite(LedPin, Power);
	}
	return;
}